<!DOCTYPE html>
<html>
<head>
  <title>Wink Detection App</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mediapipe/0.8.5/mediapipe-full.min.js"></script>
  <style>
    body {
      margin: 0;
      padding: 0;
    }
    
    #video {
      width: 100%;
      height: 100%;
    }
    
    #wink-image {
      width: 100%;
      height: 100%;
    }
  </style>
</head>
<body>
  <video id="video"></video>
  <div id="wink-image"></div>
  <script>
    let video = document.getElementById("video");
    let winkImage = document.getElementById("wink-image");
    
    // Initialize the MediaPipe Facemesh object.
    let facemesh = new mediapipe.Facemesh({
      input: video,
      maxNumFaces: 1,
      draw: true,
    });
    
    // Set up a listener for the `onPlay` event.
    video.onPlay = () => {
      // Add a delay to the `onFrame` event.
      setTimeout(() => {
        facemesh.onFrame = () => {
          // Get the face landmarks.
          let landmarks = facemesh.getLandmarks();
    
          // Check if the user has winked.
          let hasWinked = landmarks.leftEyeClosed && landmarks.rightEyeClosed;
    
          // If the user has winked, display the `wink-detected.jpg` image.
          if (hasWinked) {
            winkImage.src = "wink-detected.jpg";
          } else {
            winkImage.src = "wink-not-detected.jpg";
          }
        };
      }, 1000);
    };
  </script>
</body>
</html>
